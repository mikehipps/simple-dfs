<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>NFL 150 MME Lineup Picker (Offline)</title>
  <style>
    html, body { font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif; margin:0; padding:0; background:#0b0f14; color:#e6edf3; }
    header { padding:16px; border-bottom:1px solid #1f2630; background:#0f141a; position:sticky; top:0; z-index:2; }
    h1 { font-size: 18px; margin:0 0 4px 0; }
    .sub { color:#9aa6b2; font-size:12px; }
    main { padding:16px; display:grid; grid-template-columns: 1fr; gap:16px; max-width:1200px; margin:0 auto; }
    .card { background:#0f141a; border:1px solid #1f2630; border-radius:12px; padding:16px; }
    .row { display:flex; gap:12px; align-items:center; flex-wrap:wrap; }
    input[type="file"] { display:none; }
    .btn { background:#1f6feb; color:white; border:none; padding:8px 12px; border-radius:8px; cursor:pointer; }
    .btn.secondary { background:#253040; color:#d7e1ea; }
    .btn:disabled { opacity:0.6; cursor:not-allowed; }
    .chips { display:flex; gap:8px; flex-wrap:wrap; }
    .chip { background:#121826; border:1px solid #1f2630; border-radius:999px; padding:4px 8px; font-size:12px; color:#a9b4c2; }
    label { font-size:12px; color:#a9b4c2; }
    select, input[type="number"], input[type="text"], input[type="range"] { background:#0b0f14; color:#e6edf3; border:1px solid #253040; border-radius:8px; padding:6px 8px; }
    table { width:100%; border-collapse: collapse; font-size:12px; }
    th, td { padding:8px; border-bottom:1px solid #1f2630; text-align:left; }
    th { position:sticky; top:0; background:#0f141a; z-index:1; }
    .grid2 { display:grid; grid-template-columns: repeat(2, minmax(0, 1fr)); gap:12px; }
    .grid3 { display:grid; grid-template-columns: repeat(3, minmax(0, 1fr)); gap:12px; }
    .muted { color:#9aa6b2; }
    .ok { color:#6fe28a; }
    .warn { color:#ffcc66; }
    .err { color:#ff6b6b; }
    .footer { padding:12px; color:#8a94a6; text-align:center; }
    .hidden { display:none; }
    .map-grid { display:grid; grid-template-columns: 220px 1fr; gap:10px; align-items:center; }
    .kbd { font-family: ui-monospace, SFMono-Regular, Menlo, monospace; background:#0b0f14; border:1px solid #253040; border-radius:6px; padding:0 6px; }
  </style>
</head>
<body>
  <header>
    <h1>NFL 150 MME Lineup Picker <span class="sub">100% offline demo</span></h1>
    <div class="chips">
      <span class="chip">Drag & drop two CSVs: lineups + projections</span>
      <span class="chip">No server, all in your browser</span>
      <span class="chip">Greedy selection with breadth + stacks</span>
    </div>
  </header>
  <main>
    <section class="card" id="upload-card">
      <div class="row">
        <label><button class="btn" id="pick-lineups">Choose Lineups CSV</button> <span id="lineups-name" class="muted"></span></label>
        <input type="file" id="lineups-file" accept=".csv" />
        <label><button class="btn" id="pick-proj">Choose Projections CSV</button> <span id="proj-name" class="muted"></span></label>
        <input type="file" id="proj-file" accept=".csv" />
        <button class="btn secondary" id="load-samples">Load Samples</button>
      </div>
      <div id="mapping" class="hidden" style="margin-top:12px;">
        <h3 style="margin:8px 0;">Map Headers</h3>
        <div class="grid3">
          <div class="card">
            <h4 style="margin:0 0 8px 0;">Lineups CSV</h4>
            <div class="map-grid">
              <label>Lineup ID</label><select id="m-lineup-id"></select>
              <label>Salary</label><select id="m-salary"></select>
              <label>Players (multi-select)</label><select id="m-players" multiple size="6"></select>
            </div>
          </div>
          <div class="card">
            <h4 style="margin:0 0 8px 0;">Projections CSV</h4>
            <div class="map-grid">
              <label>Player ID</label><select id="m-player-id"></select>
              <label>Projection</label><select id="m-proj"></select>
              <label>Position</label><select id="m-pos"></select>
              <label>Team</label><select id="m-team"></select>
              <label>Opponent</label><select id="m-opp"></select>
            </div>
          </div>
          <div class="card">
            <h4 style="margin:0 0 8px 0;">Settings</h4>
            <div class="grid2">
              <label>Exposure cap %<br/><input id="cap-pct" type="number" value="25" min="5" max="50"/></label>
              <label>Max repeat players<br/><input id="max-repeat" type="number" value="4" min="3" max="8"/></label>
              <label>N lineups<br/><input id="n-lineups" type="number" value="150" min="20" max="300"/></label>
              <label>Projâ†”Diversity <span id="mix-label" class="kbd">0.20</span><br/><input id="mix" type="range" min="0" max="1" step="0.05" value="0.20"/></label>
              <label>QB+2 bonus<br/><input id="b-qb2" type="number" value="6" step="0.5"/></label>
              <label>Bring-back bonus<br/><input id="b-bring" type="number" value="3" step="0.5"/></label>
              <label>Penalty lambda<br/><input id="pen-lam" type="number" value="2" step="0.2"/></label>
            </div>
            <div class="row" style="margin-top:10px;">
              <button class="btn" id="build-btn" disabled>Build 150</button>
              <button class="btn secondary" id="export-btn" disabled>Export CSV</button>
              <span id="status" class="muted"></span>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section class="card">
      <h3 style="margin:0 0 8px 0;">Selected Lineups</h3>
      <div id="summary" class="muted">No selections yet.</div>
      <div style="max-height:380px; overflow:auto; border:1px solid #1f2630; border-radius:8px;">
        <table id="tbl">
          <thead>
            <tr>
              <th>#</th><th>Lineup ID</th><th>Proj</th><th>Salary</th><th>QB stack</th><th>Bring-back</th><th>Players</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
    </section>
  </main>
  <div class="footer">Local-only demo. Data never leaves your computer.</div>
  <script src="app.js"></script>
</body>
</html>
